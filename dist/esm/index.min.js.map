{"version":3,"file":"index.min.js","sources":["../../src/constants.js","../../src/createFullQuery.js","../../src/getGoogleFontsUrl.js","../../src/getGoogleFontsUrlSimple.js"],"sourcesContent":["export const GOOGLE_FONT_API_URI = 'https://fonts.googleapis.com/css2?'\n\nexport const AXIS_NAME_MAPPING = {\n    italic: 'ital',\n    opticalSize: 'opsz',\n    slant: 'slnt',\n    weight: 'wght',\n    width: 'wdth',\n    ascenderHeight: 'YTAS',\n    casual: 'CASL',\n    counter_width: 'XTRA',\n    cursive: 'CRSV',\n    descenderDepth: 'YTDE',\n    figureHeight: 'YTFI',\n    fill: 'FILL',\n    grade: 'GRAD',\n    lowercaseHeight: 'YTLC',\n    monospace: 'MONO',\n    softness: 'SOFT',\n    thickStroke: 'XOPQ',\n    thinStroke: 'YOPQ',\n    uppercaseHeight: 'YTUC',\n    wonky: 'WONK',\n    ital: 'ital',\n    opsz: 'opsz',\n    slnt: 'slnt',\n    wght: 'wght',\n    wdth: 'wdth',\n    YTAS: 'YTAS',\n    CASL: 'CASL',\n    XTRA: 'XTRA',\n    CRSV: 'CRSV',\n    YTDE: 'YTDE',\n    YTFI: 'YTFI',\n    FILL: 'FILL',\n    GRAD: 'GRAD',\n    YTLC: 'YTLC',\n    MONO: 'MONO',\n    SOFT: 'SOFT',\n    XOPQ: 'XOPQ',\n    YOPQ: 'YOPQ',\n    YTUC: 'YTUC',\n    WONK: 'WONK'\n}\n\nexport const ALPHABET_ORDER = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z']\n\nexport const WEIGHT_NAME_MAPPING = {\n    thin: 100,\n    extralight: 200,\n    light: 300,\n    regular: 400,\n    medium: 500,\n    semibold: 600,\n    bold: 700,\n    extrabold: 800,\n    black: 900,\n  }\n  \nexport const WIDTH_NAME_MAPPING = {\n    supercondensed: 25,\n    ultracondensed: 50,\n    extracondensed: 62.5,\n    condensed: 75,\n    semicondensed: 87.5,\n    normal: 100,\n    semiexpanded: 112.5,\n    expanded: 125,\n    extraexpanded: 150,\n  }","import { ALPHABET_ORDER, AXIS_NAME_MAPPING } from \"./constants.js\";\n\n// https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@100;200;300&display=auto\n// https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@100&family=Roboto+Mono:wght@300&family=Roboto+Mono:wght@200&display=auto\n// These two URLs request the same file, but in the second we don't need to sort the tuples (100;200;300), only the axis names.\n// Because of that, it requires less loops and processing to create the second URL, even tough it is lengthier.\n// So this is the only strategy in this library for now.\n\n\n// Tried to keep iterarion of arrays and objects to a minimum while maintaining code readability.\n\nconst createFullQuery = ({ family, styles }) => {\n  const encodedFamilyName = family.replaceAll(\" \", \"+\");\n\n  let sortedStyles = styles.map((styleObject) => { \n    \n    for (let key in styleObject) {\n      let googleAxisKey = AXIS_NAME_MAPPING[key]\n      if (!googleAxisKey) throw new Error(`The directive axis (${key}) is not on Google Fonts axis list (weight, wgth, ital...)`)\n      if (googleAxisKey !== key) delete Object.assign(styleObject, {[googleAxisKey]: styleObject[key] })[key];      \n    }\n\n    return Object.entries(styleObject).sort((pair1, pair2) => sorter(pair1[0], pair2[0])) //Sort by axis alphabetically\n  })\n  let familyString = \"\"\n\n  sortedStyles.forEach((styleAxis, i) => {\n    familyString += (i === 0 ? '' : '&') + 'family=' + encodedFamilyName + ':'\n\n    let axisString = ''\n    let valuesString = ''\n\n    styleAxis.forEach((axis, i) => {\n      let separator = styleAxis.length === i+1 ? '' : ','\n      axisString += axis[0] + separator\n      valuesString += (Array.isArray(axis[1]) ?  axis[1].join('..') : axis[1])  + separator\n    })\n\n    familyString += axisString + '@' + valuesString\n  })\n\n  return familyString\n}\n\nlet sorter = (str1, str2) => {\n  if (str1 === str2) throw new Error(`Styles Object key are not unique: ${str1}`)\n\n  // Sort by axis name\n  let position = (ALPHABET_ORDER.indexOf(str1[0]) - ALPHABET_ORDER.indexOf(str2[0]))\n  return position === 0 ? sorter(str1.substr(1), str2.substr(1)) : position\n}\n\nexport default createFullQuery","import { GOOGLE_FONT_API_URI } from \"./constants.js\";\nimport createFullQuery from \"./createFullQuery.js\";\n\n/**\n * @typedef {object} Style\n * @property {string} weight - weight of the font\n */\n/**\n * @typedef {object} familyStyle\n * @property {string} family - The family name.\n * @property {Style[]} styles - array of styles.\n */\n/**\n * @param {familyStyle[]} families \n * - Required. \n * - Array of families, and the styles to request.\n * \n * **Example:**\n * ```[{family: 'Lato', styles: [{weight: 600}]}]```\n * For a complete explanation visit: https://github.com/adriano-tirloni/google-fonts-css2\n * \n * **Detailed Description:**\n * **families:**\n * \n * ```[familyStyle, [familyStyle...]]```\n * \n * **familyStyle:**\n * \n * ```{ family: \"Roboto Flex\", styles: [style, [...style]]}```\n * \n * **style:**\n * \n * ```{ weight: 300, italic: 1, width: [25, 100]}```\n * \n * @param {'auto' | 'block' | 'swap' | 'fallback' | 'optional'} [display=auto] \n * - Optional. Defaults to ```auto```. \n * - Display strategy (https://www.w3.org/TR/css-fonts-4/#font-display-desc)\n * @param {string} [onlyThisCharacters] \n * - Optional.\n * - Creates the Google Fonts text parameter to request only included characters:\n * \n * ### Optimizing your font requests\n * Oftentimes, when you want to use a web font on your site or application, you know in advance which letters you'll need. This often occurs when you're using a web font in a logo or heading.\n * \n * In these cases, you should consider specifying a ```text=``` value in your font request URL. This allows Google Fonts to return a font file that's optimized for your request. In some cases, this can reduce the size of the font file by up to 90%.\n * \n * https://developers.google.com/fonts/docs/css2#optimizing_your_font_requests\n * @returns {string} - A Google Font CSS2 string (https://fonts.googleapis.com/css2?family=Lato:ital,wght@1,400&family=Roboto:wght@400&display=swap)\n */\nexport const getGoogleFontsUrl = (families, display='auto', onlyThisCharacters) => {\n    return GOOGLE_FONT_API_URI + createFamilies(families) + createDisplay(display) + createText(onlyThisCharacters)\n  }\n\nfunction createFamilies(families){\nreturn families.reduce((prev, familyStyles, i) => ( prev + (i?\"&\":\"\") + createFullQuery(familyStyles) ), \"\")\n}\n\nfunction createDisplay(display = 'auto') {\nreturn '&display=' + display\n}\n\nfunction createText(text = null) {\nif (!text) return \"\" \nreturn '&text=' + encodeURIComponent(text)\n}","import { WEIGHT_NAME_MAPPING, WIDTH_NAME_MAPPING } from \"./constants.js\";\nimport { getGoogleFontsUrl } from \"./getGoogleFontsUrl.js\"\n\n/**\n * \n * @param  {string | object} directives\n * Can receive any number of **directive strings or objects**, and an **options object**\n * ðŸ‘‡ (check examples below)\n * #### Options Object:\n * ```{display: 'string', onlyThisCharacters: 'string}```\n * *display: 'auto' (default) | 'block' | 'swap' | 'fallback' | 'optional'*\n * *onlyThisCharacters: optional or a string of characters*\n * #### String Directive:\n * A formatted string that will be parsed into most common styles: weight, italic, width.\n * Font Name is required, and case sensitive.\n * Weight is required.\n * Italic and Width are optional.\n * Follow this pattern:\n * ```Font Name,weight&weight,[italic,][width&width]```\n * \n * Examples:\n * ```Roboto Flex,bold,```\n */\nexport const getGoogleFontsUrlSimple = (...directives) => {\n  let stdParam = {families: [], display: undefined, onlyThisCharacters: undefined}\n\n  directives.forEach(arg => {\n    if (arg.display || arg.onlyThisCharacters){\n      //Options object\n      stdParam.display = arg.display\n      stdParam.onlyThisCharacters = arg.onlyThisCharacters\n    } else if (typeof arg === 'string') {\n      //Shortcut String \"FontNameCaseSensitive,weight_Named_Number_Range&weight_Named_Number_Range,[italic,width_Named_Number_Range];\"\n      //Examples:\n      //Lato,300&400,italic,25..50\n      //Lato,bold&semibold,italic,condensed&normal&125..150\n      //Lato,bold&semibold,condensed&normal&125..150\n      //Lato,bold&thin\n\n      let familyName = arg.slice(0, arg.indexOf(\",\"))\n      let others = arg.slice(arg.indexOf(\",\")+1).toLowerCase().replaceAll(\" \", \"\")\n      let [weights, ...italicAndWidthArray] = others.split(\",\")\n\n      let italicIndex = italicAndWidthArray ? italicAndWidthArray.indexOf(\"italic\") : -1\n      let italic = italicIndex >= 0\n      let widths = italicAndWidthArray.length ? italicAndWidthArray[italicIndex === 0 ? 1 : 0] : null\n\n      let familyStyles = {\n        family: familyName,\n        styles: []\n      }\n\n      weights.split(\"&\").forEach(weight => {\n        weight = sanitizeW(weight, WEIGHT_NAME_MAPPING)\n\n        if (widths){\n          widths.split(\"&\").forEach(width => {\n            width = sanitizeW(width,  WIDTH_NAME_MAPPING)\n  \n            let style = { weight, width }\n            if(italic) style.italic = 1;\n            familyStyles.styles.push(style)\n            \n          })\n        } else {\n          let style =  { weight }\n          if(italic) style.italic = 1;\n          familyStyles.styles.push(style)\n\n        }\n\n      })\n\n      stdParam.families.push(familyStyles)\n    } else if (typeof arg === 'object') {\n      stdParam.families.push(arg)\n    }\n  })\n\n  return getGoogleFontsUrl(stdParam.families, stdParam.display, stdParam.onlyThisCharacters)\n}\n\nfunction sanitizeW(weight_or_width, MAPPING) {\n  if (weight_or_width.includes(\"..\")) {\n    //Range\n    return weight_or_width.split(\"..\").map(n => Number(n))\n  } else if (isNaN(Number(weight_or_width))) {\n    //Named\n    let mapped = MAPPING[weight_or_width]\n    if(!mapped) throw new Error(`Invalid name for weight or width: ${weight_or_width}. You may have misplaced the argument order or separator.`)\n    return MAPPING[weight_or_width]\n  } else if (typeof Number(weight_or_width) === \"number\") {\n    //Number as string or not\n    return Number(weight_or_width)      \n  } else {\n    throw new Error(\"Could not convert font weight or width.\")\n  }\n}"],"names":["AXIS_NAME_MAPPING","italic","opticalSize","slant","weight","width","ascenderHeight","casual","counter_width","cursive","descenderDepth","figureHeight","fill","grade","lowercaseHeight","monospace","softness","thickStroke","thinStroke","uppercaseHeight","wonky","ital","opsz","slnt","wght","wdth","YTAS","CASL","XTRA","CRSV","YTDE","YTFI","FILL","GRAD","YTLC","MONO","SOFT","XOPQ","YOPQ","YTUC","WONK","ALPHABET_ORDER","WEIGHT_NAME_MAPPING","thin","extralight","light","regular","medium","semibold","bold","extrabold","black","WIDTH_NAME_MAPPING","supercondensed","ultracondensed","extracondensed","condensed","semicondensed","normal","semiexpanded","expanded","extraexpanded","sorter","str1","str2","Error","position","indexOf","substr","getGoogleFontsUrl","families","display","onlyThisCharacters","reduce","prev","familyStyles","i","family","styles","encodedFamilyName","replaceAll","sortedStyles","map","styleObject","key","googleAxisKey","Object","assign","entries","sort","pair1","pair2","familyString","forEach","styleAxis","axisString","valuesString","axis","separator","length","Array","isArray","join","createFullQuery","createFamilies","createDisplay","text","encodeURIComponent","createText","getGoogleFontsUrlSimple","directives","stdParam","undefined","arg","familyName","slice","others","toLowerCase","weights","italicAndWidthArray","split","italicIndex","widths","sanitizeW","style","push","weight_or_width","MAPPING","includes","n","Number","isNaN"],"mappings":"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"}